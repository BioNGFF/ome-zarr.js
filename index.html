<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ome-zarr.js</title>
  </head>
  <body>
    <div id="app"></div>
    <img id="thumbnail1" />
    <img id="thumbnail2" />
    <script type="module">

      console.log("loading deps....")
      import * as zarr from "https://cdn.jsdelivr.net/npm/zarrita@next/+esm";
  
      const omezarr = await import("http://localhost:5173/src/index.ts");
      
      // v0.4
      const source = "https://uk1s3.embassy.ebi.ac.uk/idr/zarr/v0.4/idr0062A/6001240.zarr";
      const store = new zarr.FetchStore(source);
      // const data = await zarr.open.v2(store);

      // console.log("attrs", data.attrs);
      // const arr = await zarr.open.v2(store, { kind: "array" });

      let src = await omezarr.renderThumbnail(store);
      document.getElementById("thumbnail1").src = src;

      const source_v5 = "https://uk1s3.embassy.ebi.ac.uk/idr/zarr/v0.5/idr0066/ExpD_chicken_embryo_MIP.ome.zarr";
      const store_v5 = new zarr.FetchStore(source_v5);
      src = await omezarr.renderThumbnail(store_v5);
      document.getElementById("thumbnail2").src = src;

    </script>
  </body>
</html>
